  <script>

  // Admin controls wiring: calls server helpers via google.script.run
  document.addEventListener('DOMContentLoaded', function() {
    try {
        if (!window.google || !google.script || !google.script.run) return;
        var adminToggle = document.getElementById('admin-toggle-test-insights');
        var adminOwnerInput = document.getElementById('admin-owner-email');
        var adminSetOwnerBtn = document.getElementById('admin-set-owner-btn');
        var adminFeatureStatus = document.getElementById('admin-feature-status');

        // Initialize from server
        google.script.run.withSuccessHandler(function(settings){
            try {
                if (adminToggle) adminToggle.checked = !!settings.testInsightsEnabled;
                if (adminOwnerInput) adminOwnerInput.value = settings.ownerEmail || '';
                if (adminFeatureStatus) adminFeatureStatus.textContent = settings.testInsightsEnabled ? 'Enabled' : 'Disabled';
            } catch (e) { console.warn('admin init populate error', e); }
        }).getAdminSettings();

        if (adminToggle) {
            adminToggle.addEventListener('change', function() {
                var enabled = !!adminToggle.checked;
                google.script.run.withSuccessHandler(function(){
                    if (adminFeatureStatus) adminFeatureStatus.textContent = enabled ? 'Enabled' : 'Disabled';
                    if (typeof showToast === 'function') showToast('Test Insights ' + (enabled ? 'enabled' : 'disabled'));
                }).setTestInsightsEnabled(enabled);
            });
        }

        if (adminSetOwnerBtn) {
            adminSetOwnerBtn.addEventListener('click', function() {
                var newEmail = adminOwnerInput ? adminOwnerInput.value : '';
                google.script.run.withSuccessHandler(function(){
                    if (typeof showToast === 'function') showToast('Owner email updated');
                }).setOwnerEmail(String(newEmail || ''));
            });
        }

    } catch (e) { console.warn('Admin UI wiring failed', e); }
  });
  </script>
  <nav class="bottom-nav hidden" id="app-tab-nav">
    <button id="show-home-tab" class="bottom-nav-button app-nav"
    onclick="showTeamSelector()">
    <span class="nav-label">Teams</span></button>
    <button id="show-fixture-tab"
    class="bottom-nav-button app-nav active" onclick=
    "showView('fixture-view')">
    <span class="nav-label">Schedule</span></button>
    <button id="show-players-tab" class="bottom-nav-button app-nav"
    onclick="showView('players-view')">
    <span class="nav-label">Players</span></button>
    <button id="show-netball-ladder-tab" class="bottom-nav-button app-nav"
    onclick="showView('netball-ladder-view')">
    <span class="nav-label">Ladder</span></button>
    <button id="show-insights-tab"
    class="bottom-nav-button app-nav insights-tab-btn" onclick=
    "showView('insights-view')">
    <span class="nav-label">Stats</span></button>
  </nav>
  <nav class="bottom-nav hidden" id="game-detail-tab-nav">
    <button id="show-home-tab-game" class=
    "bottom-nav-button game-nav" onclick=
    "showTeamSelector()">
    <span class="nav-label">Back</span></button>
    <button id="show-availability-tab"
    class="bottom-nav-button game-nav active" onclick=
    "showGameDetailTab('availability')">
    <span class="nav-label">Availability</span></button>
    <button id="show-lineup-tab"
    class="bottom-nav-button game-nav" onclick=
    "showGameDetailTab('lineup')">
    <span class="nav-label">Lineup</span></button>
    <button id="show-scoring-tab"
    class="bottom-nav-button game-nav" onclick=
    "showGameDetailTab('scoring')">
    <span class="nav-label">Score</span></button>
    <button id="show-edit-tab"
    class="bottom-nav-button game-nav hidden" onclick=
    "showGameDetailTab('edit')">
    <span class="nav-label">Edit</span></button>
  </nav>
  <!-- Read-Only Mode Indicator for Parents/Non-Owners -->
  <div id="read-only-banner" class="read-only-banner hidden">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <circle cx="12" cy="12" r="10"></circle>
      <line x1="12" y1="8" x2="12" y2="12"></line>
      <line x1="12" y1="16" x2="12.01" y2="16"></line>
    </svg>
    <span>Read-Only Mode: You can view all stats but cannot make changes</span>
  </div>
