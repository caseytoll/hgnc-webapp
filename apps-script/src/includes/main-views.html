    <!-- INSIGHTS MENU VIEW -->
    <div id="insights-view" class="view hidden">
      <!-- Refresh Button (outside dashboard container so it's always visible) -->
      <button id="refresh-insights-btn" onclick="refreshInsightsDashboard()" aria-label="Refresh Stats"
        style="position: absolute; top: 18px; right: 24px; width: 40px; height: 40px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border: none; border-radius: 50%; box-shadow: 0 2px 8px rgba(60, 60, 120, 0.10); display: flex; align-items: center; justify-content: center; font-size: 1.35em; cursor: pointer; transition: all 0.2s; opacity: 0.92; color: #3a3a5a; z-index: 10;">
        <span role="img" aria-label="Refresh">üîÑ</span>
      </button>

      <!-- INSIGHTS MENU -->
      <div class="insights-menu">
        <div class="insights-menu-header">
          <h1 class="insights-menu-title">Team Insights</h1>
          <p class="insights-menu-subtitle">Choose an analysis view</p>
        </div>

        <div class="insights-menu-grid">
          <!-- Team Performance Button (clean) -->
          <div class="insights-menu-card" onclick="showView('insights-team-performance-view')" tabindex="0" role="button" aria-label="View team performance dashboard" data-icon="">
            <div class="insights-menu-card-content">
              <h3 class="insights-menu-card-title">Team Performance</h3>
            </div>
          </div>

          <!-- Offensive Leaders Button (clean) -->
          <div class="insights-menu-card" onclick="showView('insights-offensive-leaders-view')" tabindex="0" role="button" aria-label="View offensive leaders" data-icon="">
            <div class="insights-menu-card-content">
              <h3 class="insights-menu-card-title">Offensive Leaders</h3>
            </div>
          </div>

          <!-- Defensive Wall Button (clean) -->
          <div class="insights-menu-card" onclick="showView('insights-defensive-wall-view')" tabindex="0" role="button" aria-label="View defensive wall" data-icon="">
            <div class="insights-menu-card-content">
              <h3 class="insights-menu-card-title">Defensive Wall</h3>
            </div>
          </div>

          <!-- Player Analysis Button (clean) -->
          <div class="insights-menu-card" onclick="showView('insights-player-analysis-view')" tabindex="0" role="button" aria-label="View player analysis" data-icon="">
            <div class="insights-menu-card-content">
              <h3 class="insights-menu-card-title">Player Analysis</h3>
            </div>
          </div>

          <!-- Lineup Analytics: Defensive Units Button -->
          <div class="insights-menu-card" onclick="navigateToLineupPage('defensive-units')" tabindex="0" role="button" aria-label="View defensive unit combinations">
            <div class="insights-menu-card-content">
              <h3 class="insights-menu-card-title">Defensive Units</h3>
            </div>
          </div>

          <!-- Lineup Analytics: Attacking Units Button -->
          <div class="insights-menu-card" onclick="navigateToLineupPage('attacking-units')" tabindex="0" role="button" aria-label="View attacking unit combinations">
            <div class="insights-menu-card-content">
              <h3 class="insights-menu-card-title">Attacking Units</h3>
            </div>
          </div>

          <!-- Lineup Analytics: Position Pairings Button -->
          <div class="insights-menu-card" onclick="navigateToLineupPage('position-pairings')" tabindex="0" role="button" aria-label="View position pair combinations">
            <div class="insights-menu-card-content">
              <h3 class="insights-menu-card-title">Position Pairings</h3>
            </div>
          </div>

          <!-- TEST: Unified Stats View -->
          <div class="insights-menu-card" onclick="console.log('[TEST] Opening unified stats'); showView('unified-stats-view'); setTimeout(function(){ console.log('[TEST] Calling renderUnifiedStats'); if(typeof renderUnifiedStats==='function'){renderUnifiedStats();}else{console.error('renderUnifiedStats not found');} }, 100);" tabindex="0" role="button" aria-label="Test unified stats view" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: 2px dashed rgba(255,255,255,0.3);">
            <div class="insights-menu-card-content" style="background: rgba(255,255,255,0.95);">
              <h3 class="insights-menu-card-title" style="color: #667eea;">Unified Stats (Test)</h3>
            </div>
          </div>
        </div><!-- End insights-menu-grid -->
      </div><!-- End insights-menu -->
      
      <script>
        // Runtime icon injection - set data-icon attributes from global variables
        // This runs immediately after cards are defined in the DOM
        (function () {
          // Use globally-exposed icon data URLs (parsed from server-data JSON)
          var iconUrls = {
            'team-performance': window.TEAM_PERFORMANCE_ICON_DATA_URL,
            'offensive-leaders': window.OFFENSIVE_LEADERS_ICON_DATA_URL,
            'defensive-wall': window.DEFENSIVE_WALL_ICON_DATA_URL,
            'player-analysis': window.PLAYER_ANALYSIS_ICON_DATA_URL
          };
          
          var cards = document.querySelectorAll('.insights-menu-card');
          cards.forEach(function(card) {
            var onclick = card.getAttribute('onclick') || '';
            var viewId = '';
            if (onclick.indexOf('team-performance') !== -1) viewId = 'team-performance';
            else if (onclick.indexOf('offensive-leaders') !== -1) viewId = 'offensive-leaders';
            else if (onclick.indexOf('defensive-wall') !== -1) viewId = 'defensive-wall';
            else if (onclick.indexOf('player-analysis') !== -1) viewId = 'player-analysis';
            
            if (viewId && iconUrls[viewId]) {
              card.setAttribute('data-icon', iconUrls[viewId]);
            }
          });
        })();
      </script>
    </div>

    <!-- TEAM PERFORMANCE DASHBOARD SUB-VIEW -->
    <div id="insights-team-performance-view" class="view hidden">
      <div class="stats-page" style="max-width: 600px;">
        <!-- Unified Header -->
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Team Performance</h1>
            <p class="stats-subtitle" id="insights-season-stats">Season statistics overview</p>
          </div>
        </div>

          <!-- Core Performance Metrics Grid -->
          <div class="perf-metrics-grid">
            <!-- Record Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View record details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Record <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-record">0-0-0</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Record Breakdown</div>
                  <div class="perf-detail-content" id="perf-record-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Win Rate Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View win rate details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Win Rate <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-win-rate">0%</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Win Rate Trend</div>
                  <div class="perf-detail-content" id="perf-winrate-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Goal Diff Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View goal difference details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Goal Diff <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-goal-diff">+0</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Goal Differential</div>
                  <div class="perf-detail-content" id="perf-goaldiff-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Form Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View recent form details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Form (L5) <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value perf-form" id="perf-form">‚Äî</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Recent Games</div>
                  <div class="perf-detail-content" id="perf-form-detail">Loading...</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Scoring Efficiency Grid -->
          <div class="perf-metrics-grid" style="margin-top: 12px;">
            <!-- Avg For Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View scoring statistics">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Avg For <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-avg-for">0.0</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Scoring Range</div>
                  <div class="perf-detail-content" id="perf-avgfor-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Avg Against Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View defensive statistics">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Avg Against <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-avg-against">0.0</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Defensive Range</div>
                  <div class="perf-detail-content" id="perf-avgagainst-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Best Quarter Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View best quarter details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Best Quarter <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-best-qtr">Q1</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Best Quarter Stats</div>
                  <div class="perf-detail-content" id="perf-bestqtr-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Top Defender Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View top defender details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Top Defender <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-clean-sheets">‚Äî</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Best Defender by Avg GA/Q</div>
                  <div class="perf-detail-content" id="perf-cleansheets-detail">Loading...</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Average Goals Cards -->
          <div class="perf-metrics-grid" style="margin-top: 12px;">
            <!-- Ave Goals For Singles Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View singles scoring average details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Ave Goals For Singles <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-ave-goals-for-singles">‚Äî</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Singles Scoring Average</div>
                  <div class="perf-detail-content" id="perf-ave-goals-for-singles-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Ave Goals Against Singles Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View singles defensive average details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Ave Goals Against Singles <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-ave-goals-against-singles">‚Äî</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Singles Defensive Average</div>
                  <div class="perf-detail-content" id="perf-ave-goals-against-singles-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Ave Goals For Pairs Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View pairs scoring average details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Ave Goals For Pairs <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-ave-goals-for-pairs">‚Äî</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Pairs Scoring Average</div>
                  <div class="perf-detail-content" id="perf-ave-goals-for-pairs-detail">Loading...</div>
                </div>
              </div>
            </div>

            <!-- Ave Goals Against Pairs Card -->
            <div class="perf-flip-container" onclick="flipPerfCard(this)" tabindex="0" role="button" aria-label="View pairs defensive average details">
              <div class="perf-flip-card">
                <div class="perf-card-front">
                  <div class="perf-label">Ave Goals Against Pairs <span class="flip-hint">‚ìò</span></div>
                  <div class="perf-value" id="perf-ave-goals-against-pairs">‚Äî</div>
                </div>
                <div class="perf-card-back">
                  <div class="perf-detail-title">Pairs Defensive Average</div>
                  <div class="perf-detail-content" id="perf-ave-goals-against-pairs-detail">Loading...</div>
                </div>
              </div>
            </div>
          </div>

        <!-- COLLAPSIBLE SECTION: Quarter Performance -->
        <div class="insights-accordion-section">
          <div class="insights-accordion-header" onclick="toggleInsightsSection('quarter-perf')">
            <div class="insights-accordion-title">
              <span class="insights-accordion-icon" id="quarter-perf-icon">‚ñ∂</span>
              <h3>Quarter Performance</h3>
            </div>
            <div class="insights-accordion-summary" id="quarter-perf-summary">
              <span class="summary-badge">Best: <strong id="summary-best-qtr">‚Äî</strong></span>
              <span class="summary-badge">Worst: <strong id="summary-worst-qtr">‚Äî</strong></span>
            </div>
          </div>
          <div class="insights-accordion-content" id="quarter-perf-content" style="display: none;">

        <!-- QUARTER PERFORMANCE SUMMARY -->
        <div class="dashboard-section quarter-summary-card" onclick="showInsightsSubView('insights-team-record-view')" style="margin-top: 0;">
          <div class="dashboard-header">
            <h3 class="dashboard-title">Quarter Performance</h3>
            <span class="chevron-right">‚Ä∫</span>
          </div>
          <div class="quarter-summary-stats">
            <div class="quarter-stat-item">
              <div class="quarter-stat-label">Best</div>
              <div class="quarter-stat-value best" id="insights-best-qtr">Q1</div>
            </div>
            <div class="quarter-stat-item">
              <div class="quarter-stat-label">Worst</div>
              <div class="quarter-stat-value worst" id="insights-worst-qtr">Q3</div>
            </div>
            <div class="quarter-stat-item">
              <div class="quarter-stat-label">Avg. Margin</div>
              <div class="quarter-stat-value" id="insights-avg-margin">+7</div>
            </div>
          </div>
        </div>

        </div>
        </div>

        <!-- COLLAPSIBLE SECTION: Suggested Lineup -->
        <div class="insights-accordion-section">
          <div class="insights-accordion-header" onclick="toggleInsightsSection('lineup')">
            <div class="insights-accordion-title">
              <span class="insights-accordion-icon" id="lineup-icon">‚ñ∂</span>
              <h3>üéØ Suggested Lineup</h3>
            </div>
            <div class="insights-accordion-summary" id="lineup-summary">
              <span class="summary-badge">AI-powered recommendations</span>
            </div>
          </div>
          <div class="insights-accordion-content" id="lineup-content" style="display: none;">
            <!-- Suggested Lineup content goes here -->
          </div>
        </div>
      </div>
    </div>

    <!-- OFFENSIVE LEADERS SUB-VIEW -->
    <div id="insights-offensive-leaders-view" class="view hidden">
      <div class="offense-page">
        <div class="offense-header">
          <button class="offense-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="offense-header-text">
            <h1 class="offense-title">Offensive Leaders</h1>
            <p class="offense-subtitle">Goal scoring analysis</p>
          </div>
        </div>

        <div class="offense-cards">
          <!-- Top Scorer Card -->
          <div class="offense-card" tabindex="0" role="button">
            <div class="offense-card-content">
              <div class="offense-card-label">Top Scorer</div>
              <div class="offense-card-value" id="offense-top-scorer">‚Äî</div>
              <div class="offense-card-stat" id="offense-top-scorer-stat"></div>
            </div>
          </div>

          <!-- Top Scoring Pair Card -->
          <div class="offense-card" tabindex="0" role="button">
            <div class="offense-card-content">
              <div class="offense-card-label">Top Scoring Pair</div>
              <div class="offense-card-value offense-card-value-pair" id="offense-top-pair">‚Äî</div>
              <div class="offense-card-stat" id="offense-top-pair-stat"></div>
            </div>
          </div>

          <!-- Most Efficient Scorer Card -->
          <div class="offense-card" tabindex="0" role="button">
            <div class="offense-card-content">
              <div class="offense-card-label">Most Efficient</div>
              <div class="offense-card-value" id="offense-efficient-scorer">‚Äî</div>
              <div class="offense-card-stat" id="offense-efficient-stat"></div>
            </div>
          </div>
        </div>

        <button class="offense-cta" onclick="showInsightsSubView('insights-offense-hub-view')">
          View Full Analysis
        </button>
      </div>
    </div>

    <!-- DEFENSIVE WALL SUB-VIEW -->
    <div id="insights-defensive-wall-view" class="view hidden">
      <div class="defense-page">
        <div class="defense-header">
          <button class="defense-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="defense-header-text">
            <h1 class="defense-title">Defensive Wall</h1>
            <p class="defense-subtitle">Goals against analysis</p>
          </div>
        </div>

        <div class="defense-cards">
          <!-- Top Defender Card -->
          <div class="defense-card" tabindex="0" role="button">
            <div class="defense-card-content">
              <div class="defense-card-label">Top Defender</div>
              <div class="defense-card-value" id="defense-top-defender">‚Äî</div>
              <div class="defense-card-stat" id="defense-top-defender-stat"></div>
            </div>
          </div>

          <!-- Top Defensive Pair Card -->
          <div class="defense-card" tabindex="0" role="button">
            <div class="defense-card-content">
              <div class="defense-card-label">Top Defensive Pair</div>
              <div class="defense-card-value defense-card-value-pair" id="defense-top-pair">‚Äî</div>
              <div class="defense-card-stat" id="defense-top-pair-stat"></div>
            </div>
          </div>
        </div>

        <button class="defense-cta" onclick="showInsightsSubView('insights-defenders-view')">
          View Full Analysis
        </button>
      </div>
    </div>

    <div id="netball-ladder-view" class="view hidden">
      <section class="card">
        <div class="card-header">
          <h2 class="card-title">Ladder</h2><button class="icon-btn" onclick=
          "refreshLadderManually()" title=
          "Refresh from API">‚ü≥</button>
        </div>
        <div id="netball-ladder-table">
          <div class="empty-state">
            Loading ladder data...
          </div>
        </div>
      </section>
      <section class="card">
        <div class="card-header">
          <h2 class="card-title">Round by Round
          Fixture</h2><button class="icon-btn" onclick=
          "refreshResultsManually()" title=
          "Refresh from API">‚ü≥</button>
        </div>
        <div id="netball-results-container">
          <div class="empty-state">
            Loading match data...
          </div>
        </div>
      </section>
    </div>
    <div id="admin-view" class="view hidden">
      <button class="back-button" onclick="showTeamSelector()">üè†
      Home</button>
      <section class="card">
        <h3 class="card-title" style="margin-bottom: 12px;">
        NetballConnect Auth Token</h3>
        <p class="card-subtitle">Paste the Authorization token
        copied from the browser's Network tab here when it
        expires.</p>
        <textarea id="admin-auth-token" rows="5" style=
        "width: 100%; padding: 12px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.9em; box-sizing: border-box;">
        </textarea>
        <div style=
        "margin-top: 10px; display: flex; justify-content: flex-end;">
          <button id="admin-save-token-btn" style=
          "padding: 10px 16px;">Save New Token</button>
        </div>
        <p style="margin-top: 20px; font-size: 0.9em;">Current
        Status: <span id="admin-token-status" style=
        "font-weight: bold; color: var(--secondary-text);">Loading...</span></p>
        <hr style=
        "margin: 12px 0; border: none; border-top: 1px solid var(--border-color); opacity: 0.6;">

        <div id="admin-feature-controls" style="margin-top:12px;">
          <h4 style="margin:6px 0 8px 0;">Feature
          Flags</h4><label style=
          "display:flex;align-items:center;gap:8px;"><input type=
          "checkbox" id="admin-toggle-test-insights"> <span>Enable
          Test Insights (server-wide)</span></label>
          <p style=
          "margin:8px 0 0 0;font-size:0.9em;color:var(--secondary-text);">
          Server flag: <strong id=
          "admin-feature-status">Loading...</strong></p>
          <h4 style="margin:12px 0 8px 0;">Owner Account</h4>
          <div style="display:flex;gap:8px;align-items:center;">
            <input id="admin-owner-email" type="email" placeholder=
            "owner@example.com" style=
            "flex:1;padding:8px;border:1px solid var(--border-color);border-radius:6px;">
            <button id="admin-set-owner-btn" style=
            "padding:8px 12px;">Set Owner</button>
          </div>
        </div>
      </section>
      <section class="card">
        <h3 class="card-title" style="margin-bottom: 12px;">
        Opponent Difficulty Ratings (DR)</h3>
        <p class="card-subtitle">Calculated based on external team
        points and goal percentage.</p>
        <div class="position-grid-wrapper">
          <table class="position-grid insights-table" id=
          "admin-dr-table"></table>
        </div>
      </section>
    </div>
    <div id="game-detail-view" class="view hidden">
      <header class="game-detail-header">
        <button class="back-button" onclick=
        "showView('fixture-view')">‚Üê Back to Fixture</button>
        <h1 id="game-detail-title" class="page-title">vs
        Opponent</h1>
        <button id="fullscreen-toggle-btn" class="icon-btn" onclick="toggleFullscreen()" 
        title="Toggle Fullscreen">‚õ∂</button>
        <button id="share-game-btn" class="icon-btn" onclick="shareCurrentGame()" 
        title="Share Game Result">üì§</button>
      </header>
      <div class="sticky-score-wrapper">
        <section class="card total-score-card">
          <div class="score-team">
            <h5>Us</h5>
            <div id="total-score-us" class="score">
              0
            </div>
          </div>
          <div class="score-separator">
            -
          </div>
          <div class="score-team">
            <h5 id="total-score-opponent-name">Opponent</h5>
            <div id="total-score-opponent" class="score">
              0
            </div>
          </div>
        </section>
      </div>
      <section id="availability-content" class="card">
        <h3 class="card-title" style="margin-bottom: 12px;">Player
        Availability</h3>
        <div id="game-availability-list"></div>
      </section>
      <section id="game-lineup-content" class="card hidden">
        <div class="card-header">
          <h3 class="card-title" style=
          "margin: 0; padding: 0; border: none;">
          Lineup</h3><button id="show-share-modal-btn" style=
          "padding: 8px 12px; font-size: 0.9em;">üì• Share
          Lineup</button>
        </div>
        <div id="lineup-status-card" class="card" style=
        "background-color: var(--bg-color);"></div>
        <div class="position-grid-wrapper">
          <table class="position-grid" id="position-grid-table">
          </table>
        </div>
      </section>
      <section id="scoring-content" class="card hidden">
        <div class="goals-grid" id="goals-grid-container"></div>
      </section>
      <section id="edit-content" class="card hidden">
        <div class="card-header" style="align-items: center;">
          <h3 class="card-title" id="game-edit-title" style="margin: 0;">Edit Game</h3>
          <span id="game-edit-subtitle" class="card-subtitle" style="margin-left: auto; font-size: 0.9em; color: var(--secondary-text);"></span>
        </div>

        <div class="form-grid" style="row-gap: 12px;">
          <label for="new-game-round">Round</label>
          <input type="number" id="new-game-round" placeholder="e.g., 1">

          <label for="new-game-date">Date</label>
          <input type="date" id="new-game-date">

          <label for="new-game-time">Game Time</label>
          <input type="time" id="new-game-time" placeholder="e.g., 14:30">

          <label for="new-game-court">Court</label>
          <input type="text" id="new-game-court" placeholder="e.g., Court 1">

          <label for="new-game-venue">Venue üìç</label>
          <div style="display: flex; gap: 8px; align-items: center;">
            <input type="text" id="new-game-venue" placeholder="e.g., Smith Park" style="flex: 1;">
            <button type="button" onclick="getCurrentLocation()" class="icon-button" title="Use current location">üìç</button>
          </div>

          <label for="new-game-status">Game Status</label>
          <select id="new-game-status" onchange="toggleOpponentField(this.value)">
            <option value="normal">Normal</option>
            <option value="bye">BYE</option>
            <option value="forfeit_us">Forfeited by Us</option>
            <option value="forfeit_opp">Forfeited by Opponent</option>
            <option value="abandoned">Abandoned</option>
          </select>

          <label for="new-game-opponent">Opponent</label>
          <input type="text" id="new-game-opponent" placeholder="Opponent Name">
        </div>

        <div class="card-actions" style="display: flex; justify-content: space-between; align-items: center; margin-top: 16px; gap: 12px;">
          <div id="delete-game-zone" class="modal-delete-zone hidden" style="margin: 0; padding: 0;">
            <button id="delete-game-button" class="delete-button-modal">Delete Game</button>
          </div>
          <div style="display: flex; gap: 10px; margin-left: auto;">
            <button class="cancel-btn" onclick="cancelGameEdit()">Cancel</button>
            <button id="add-game-button">Save</button>
          </div>
        </div>
      </section>
    </div>
    <div id="player-detail-view" class="view hidden">
      <header class="game-detail-header">
        <h1 id="player-detail-name" class="page-title">Player Name</h1>
        <button class="back-button" onclick="showView('players-view')">‚Üê Back to Players</button>
      </header>
      <section class="card">
        <h3 class="card-title" style="margin-bottom: 12px;">Season Summary</h3>
        <div id="player-detail-fill-in-badge" style="margin-bottom: 12px;"></div>
        <div class="stat-grid">
          <div class="stat-card">
            <div id="player-detail-games" class="stat-value">0</div>
            <div class="stat-label">Games Played</div>
          </div>
          <div class="stat-card">
            <div id="player-detail-goals" class="stat-value">0</div>
            <div class="stat-label">Total Goals</div>
          </div>
        </div>
      </section>
      <section class="card">
        <h3 class="card-title" style="margin-bottom: 12px;">Position Distribution (Qtrs)</h3>
        <div id="player-detail-positions"></div>
      </section>
      <section class="card">
        <h3 class="card-title" style="margin-bottom: 12px;">Bench Time</h3>
        <div id="player-detail-off-stats"></div>
      </section>
      <section class="card">
        <h3 class="card-title" style="margin-bottom: 12px;">+/- by Position</h3>
        <div id="player-detail-plusminus"></div>
      </section>
    </div><!-- End player-detail-view -->

    <div id="insights-team-record-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-team-performance-view')" aria-label="Back">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Round by Round</h1>
            <p class="stats-subtitle">Game-by-game results</p>
          </div>
        </div>
        <div class="stats-card">
          <div id="insights-team-record-table"></div>
        </div>
      </div>
    </div>
    <div id="insights-player-stats-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Player Stats</h1>
            <p class="stats-subtitle">Scoring and defensive metrics</p>
          </div>
        </div>

        <div class="stats-section-title">Scoring Stats</div>
        <div class="stats-card">
          <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-color);">Singles - Goals &amp; Average</h4>
          <div id="player-scoring-stats"></div>
        </div>
        <div class="stats-card">
          <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-color);">GS/GA Pairs - Goals &amp; Average</h4>
          <div id="pairs-scoring-stats"></div>
        </div>

        <div class="stats-section-title">Defensive Stats</div>
        <div class="stats-card">
          <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-color);">Singles - Goals Against Avg</h4>
          <div id="player-defensive-stats"></div>
        </div>
        <div class="stats-card">
          <h4 style="margin: 0 0 12px 0; font-size: 0.9em; color: var(--text-color);">GD/GK Pairs - Goals Against Avg</h4>
          <div id="pairs-defensive-stats"></div>
        </div>
      </div>
    </div><!-- Removed empty/duplicate insights-offense-view -->
    <div id="insights-defense-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">GD/GK Pairs</h1>
            <p class="stats-subtitle">Goals conceded analysis</p>
          </div>
        </div>
        <p class="card-subtitle hidden" id="insights-defense-subtitle" style="font-size: 0.85em; color: var(--secondary-text); margin-bottom: 12px;">Note: "Efficiency" sort shows pairs with 3+ Qtrs.</p>
        <div class="analysis-sort-tabs">
          <button id="sort-defense-impact" class="analysis-sort-btn active" onclick="setInsightsSort('defense', 'impact')">Total Impact</button>
          <button id="sort-defense-avg" class="analysis-sort-btn" onclick="setInsightsSort('defense', 'avg')">Efficiency</button>
          <button id="sort-defense-qtrs" class="analysis-sort-btn" onclick="setInsightsSort('defense', 'quarters')">Qtrs</button>
        </div>
        <div id="insights-defense-combos"></div>
      </div>
    </div>
    <div id="insights-defenders-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Top Defenders</h1>
            <p class="stats-subtitle">GD/GK individual analysis</p>
          </div>
        </div>
        <p class="card-subtitle hidden" id="insights-defenders-subtitle" style="font-size: 0.85em; color: var(--secondary-text); margin-bottom: 12px;">Note: "Efficiency" sort shows players with 3+ Qtrs.</p>
        <div class="analysis-sort-tabs">
          <button id="sort-defenders-impact" class="analysis-sort-btn active" onclick="setInsightsSort('defenders', 'impact')">Total Impact</button>
          <button id="sort-defenders-avg" class="analysis-sort-btn" onclick="setInsightsSort('defenders', 'avg')">Efficiency</button>
          <button id="sort-defenders-qtrs" class="analysis-sort-btn" onclick="setInsightsSort('defenders', 'quarters')">Qtrs</button>
        </div>
        <div id="insights-top-defenders"></div>
      </div>
    </div>

    <!-- PLAYER ANALYSIS VIEW -->
    <div id="insights-player-analysis-view" class="view hidden">
      <div class="analysis-page">
        <div class="analysis-header">
          <button class="analysis-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="analysis-header-text">
            <h1 class="analysis-title">Player Analysis</h1>
            <p class="analysis-subtitle">Season leaders and performance metrics</p>
          </div>
        </div>

        <!-- Season Leaders Cards -->
        <div class="analysis-section-title">Season Leaders</div>
        <div class="analysis-cards">
          <div class="analysis-card">
            <div class="analysis-card-label">Top Scorer</div>
            <div class="analysis-card-value" id="top-gun-name">‚Äî</div>
            <div class="analysis-card-stat" id="top-gun-detail">Most goals scored</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-card-label">Most Quarters</div>
            <div class="analysis-card-value" id="iron-woman-name">‚Äî</div>
            <div class="analysis-card-stat" id="iron-woman-detail">Most quarters played</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-card-label">Most Versatile</div>
            <div class="analysis-card-value" id="swiss-army-name">‚Äî</div>
            <div class="analysis-card-stat" id="swiss-army-detail">Most positions played</div>
          </div>
          <div class="analysis-card">
            <div class="analysis-card-label">Most Captaincies</div>
            <div class="analysis-card-value" id="leader-name">‚Äî</div>
            <div class="analysis-card-stat" id="leader-detail">Team captain count</div>
          </div>
        </div>

        <!-- Player Performance Table -->
        <div class="analysis-section-title">All Players</div>
        <div class="analysis-sort-tabs">
          <button id="sort-analysis-goals" class="analysis-sort-btn active" onclick="setPlayerAnalysisSort('goals')">Goals</button>
          <button id="sort-analysis-quarters" class="analysis-sort-btn" onclick="setPlayerAnalysisSort('quarters')">Quarters</button>
          <button id="sort-analysis-versatility" class="analysis-sort-btn" onclick="setPlayerAnalysisSort('versatility')">Versatility</button>
          <button id="sort-analysis-games" class="analysis-sort-btn" onclick="setPlayerAnalysisSort('games')">Games</button>
        </div>
        <div class="analysis-table-wrapper">
          <table class="analysis-table" id="insights-player-analysis-table"></table>
        </div>
      </div>
    </div>

    <div id="insights-player-plusminus-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Player +/- by Position</h1>
            <p class="stats-subtitle">Individual plus/minus analysis</p>
          </div>
        </div>
        <p class="card-subtitle hidden" id="insights-pm-subtitle" style="font-size: 0.85em; color: var(--secondary-text); margin-bottom: 12px;">Note: "Avg +/-" sort only shows players with 3+ Qtrs.</p>
        <div class="analysis-sort-tabs">
          <button id="sort-pm-total" class="analysis-sort-btn active" onclick="setInsightsPlusMinusSort('total')">Total +/-</button>
          <button id="sort-pm-avg" class="analysis-sort-btn" onclick="setInsightsPlusMinusSort('avg')">Avg +/-</button>
          <button id="sort-pm-qtrs" class="analysis-sort-btn" onclick="setInsightsPlusMinusSort('quarters')">Qtrs</button>
        </div>
        <div class="stats-table-wrapper">
          <table class="stats-table" id="insights-player-plusminus-table"></table>
        </div>
      </div>
    </div>

    <!-- LINEUP ANALYTICS: DEFENSIVE UNITS VIEW -->
    <div id="insights-lineup-defensive-units-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Defensive Units</h1>
            <p class="stats-subtitle">GK-GD-WD-C combinations (3+ qtrs)</p>
          </div>
        </div>
        <div class="stats-card">
          <div id="lineup-defensive-units-table" class="stats-empty">Loading lineup data...</div>
        </div>
      </div>
    </div>

    <!-- LINEUP ANALYTICS: ATTACKING UNITS VIEW -->
    <div id="insights-lineup-attacking-units-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Attacking Units</h1>
            <p class="stats-subtitle">GS-GA-WA-C combinations (3+ qtrs)</p>
          </div>
        </div>
        <div class="stats-card">
          <div id="lineup-attacking-units-table" class="stats-empty">Loading lineup data...</div>
        </div>
      </div>
    </div>

    <!-- LINEUP ANALYTICS: POSITION PAIRINGS VIEW -->
    <div id="insights-lineup-position-pairings-view" class="view hidden">
      <div class="stats-page">
        <div class="stats-header">
          <button class="stats-back-btn" onclick="showView('insights-view')" aria-label="Back to Insights">‚Üê</button>
          <div class="stats-header-text">
            <h1 class="stats-title">Position Pairings</h1>
            <p class="stats-subtitle">Position pair performance (2+ qtrs)</p>
          </div>
        </div>
        <div class="stats-card">
          <div id="lineup-position-pairings-content" class="stats-empty">Loading lineup data...</div>
        </div>
      </div>
    </div>

    <!-- TEST: UNIFIED STATS VIEW -->
    <div id="unified-stats-view" class="view hidden">
      <div class="unified-stats">
        <!-- Hero Header -->
        <div class="us-hero">
          <button class="us-back-btn" onclick="showView('insights-view')" aria-label="Back">‚Üê</button>
          <div class="us-hero-content">
            <div class="us-team-name" id="us-team-name">Team Name</div>
            <div class="us-season" id="us-season">Season</div>
          </div>
          <div class="us-record-badge" id="us-record">0-0-0</div>
        </div>

        <!-- Key Metrics Strip -->
        <div class="us-metrics-strip">
          <div class="us-metric">
            <div class="us-metric-value" id="us-win-rate">0%</div>
            <div class="us-metric-label">Win Rate</div>
          </div>
          <div class="us-metric">
            <div class="us-metric-value" id="us-goal-diff">+0</div>
            <div class="us-metric-label">Goal Diff</div>
          </div>
          <div class="us-metric">
            <div class="us-metric-value" id="us-best-qtr">Q1</div>
            <div class="us-metric-label">Best Qtr</div>
          </div>
          <div class="us-metric">
            <div class="us-metric-value us-form" id="us-form">‚Äî</div>
            <div class="us-metric-label">Form</div>
          </div>
        </div>

        <!-- Tab Navigation -->
        <div class="us-tabs">
          <button class="us-tab active" data-tab="team" onclick="switchUnifiedTab('team')">Team</button>
          <button class="us-tab" data-tab="offense" onclick="switchUnifiedTab('offense')">Offense</button>
          <button class="us-tab" data-tab="defense" onclick="switchUnifiedTab('defense')">Defense</button>
          <button class="us-tab" data-tab="players" onclick="switchUnifiedTab('players')">Players</button>
        </div>

        <!-- Tab Content: Team -->
        <div class="us-tab-content active" id="us-tab-team">
          <!-- Quarter Performance -->
          <div class="us-section-title">Quarter Performance</div>
          <div class="us-quarters-grid">
            <div class="us-quarter-card" id="us-q1">
              <div class="us-quarter-label">Q1</div>
              <div class="us-quarter-value">+0</div>
            </div>
            <div class="us-quarter-card" id="us-q2">
              <div class="us-quarter-label">Q2</div>
              <div class="us-quarter-value">+0</div>
            </div>
            <div class="us-quarter-card" id="us-q3">
              <div class="us-quarter-label">Q3</div>
              <div class="us-quarter-value">+0</div>
            </div>
            <div class="us-quarter-card" id="us-q4">
              <div class="us-quarter-label">Q4</div>
              <div class="us-quarter-value">+0</div>
            </div>
          </div>

          <!-- Averages -->
          <div class="us-section-title">Scoring Averages</div>
          <div class="us-avg-grid">
            <div class="us-avg-card">
              <div class="us-avg-label">Goals For</div>
              <div class="us-avg-value us-positive" id="us-avg-for">0.0</div>
              <div class="us-avg-sub">per game</div>
            </div>
            <div class="us-avg-card">
              <div class="us-avg-label">Goals Against</div>
              <div class="us-avg-value us-negative" id="us-avg-against">0.0</div>
              <div class="us-avg-sub">per game</div>
            </div>
          </div>

          <!-- Recent Games -->
          <div class="us-section-title">Recent Games</div>
          <div class="us-games-list" id="us-recent-games">
            <div class="us-empty">No games yet</div>
          </div>
        </div>

        <!-- Tab Content: Offense -->
        <div class="us-tab-content" id="us-tab-offense">
          <!-- Leaders -->
          <div class="us-section-title">Top Performers</div>
          <div class="us-leaders-grid">
            <div class="us-leader-card us-leader-primary">
              <div class="us-leader-rank">1</div>
              <div class="us-leader-info">
                <div class="us-leader-name" id="us-top-scorer">‚Äî</div>
                <div class="us-leader-stat" id="us-top-scorer-stat">Top Scorer</div>
              </div>
            </div>
            <div class="us-leader-card">
              <div class="us-leader-rank">2</div>
              <div class="us-leader-info">
                <div class="us-leader-name" id="us-second-scorer">‚Äî</div>
                <div class="us-leader-stat" id="us-second-scorer-stat"></div>
              </div>
            </div>
            <div class="us-leader-card">
              <div class="us-leader-rank">3</div>
              <div class="us-leader-info">
                <div class="us-leader-name" id="us-third-scorer">‚Äî</div>
                <div class="us-leader-stat" id="us-third-scorer-stat"></div>
              </div>
            </div>
          </div>

          <!-- Best Pair -->
          <div class="us-section-title">Best Scoring Pair</div>
          <div class="us-pair-card" id="us-top-offense-pair">
            <div class="us-pair-names">‚Äî</div>
            <div class="us-pair-stat"></div>
          </div>

          <!-- All Scorers Table -->
          <div class="us-section-title">All Scorers</div>
          <div class="us-table-wrapper">
            <table class="us-table" id="us-scorers-table">
              <thead>
                <tr><th>Player</th><th>Goals</th><th>Qtrs</th><th>Avg</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Tab Content: Defense -->
        <div class="us-tab-content" id="us-tab-defense">
          <!-- Leaders -->
          <div class="us-section-title">Top Defenders</div>
          <div class="us-leaders-grid">
            <div class="us-leader-card us-leader-primary us-defense">
              <div class="us-leader-rank">1</div>
              <div class="us-leader-info">
                <div class="us-leader-name" id="us-top-defender">‚Äî</div>
                <div class="us-leader-stat" id="us-top-defender-stat">Best GA/Qtr</div>
              </div>
            </div>
            <div class="us-leader-card us-defense">
              <div class="us-leader-rank">2</div>
              <div class="us-leader-info">
                <div class="us-leader-name" id="us-second-defender">‚Äî</div>
                <div class="us-leader-stat" id="us-second-defender-stat"></div>
              </div>
            </div>
            <div class="us-leader-card us-defense">
              <div class="us-leader-rank">3</div>
              <div class="us-leader-info">
                <div class="us-leader-name" id="us-third-defender">‚Äî</div>
                <div class="us-leader-stat" id="us-third-defender-stat"></div>
              </div>
            </div>
          </div>

          <!-- Best Defensive Pair -->
          <div class="us-section-title">Best Defensive Pair</div>
          <div class="us-pair-card us-defense" id="us-top-defense-pair">
            <div class="us-pair-names">‚Äî</div>
            <div class="us-pair-stat"></div>
          </div>

          <!-- All Defenders Table -->
          <div class="us-section-title">All Defenders</div>
          <div class="us-table-wrapper">
            <table class="us-table" id="us-defenders-table">
              <thead>
                <tr><th>Player</th><th>GA</th><th>Qtrs</th><th>Avg</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

        <!-- Tab Content: Players -->
        <div class="us-tab-content" id="us-tab-players">
          <div class="us-section-title">Season Superlatives</div>
          <div class="us-superlatives">
            <div class="us-superlative">
              <div class="us-superlative-icon">üéØ</div>
              <div class="us-superlative-info">
                <div class="us-superlative-title">Top Gun</div>
                <div class="us-superlative-name" id="us-sup-topgun">‚Äî</div>
                <div class="us-superlative-detail" id="us-sup-topgun-detail"></div>
              </div>
            </div>
            <div class="us-superlative">
              <div class="us-superlative-icon">üí™</div>
              <div class="us-superlative-info">
                <div class="us-superlative-title">Iron Woman</div>
                <div class="us-superlative-name" id="us-sup-ironwoman">‚Äî</div>
                <div class="us-superlative-detail" id="us-sup-ironwoman-detail"></div>
              </div>
            </div>
            <div class="us-superlative">
              <div class="us-superlative-icon">üîß</div>
              <div class="us-superlative-info">
                <div class="us-superlative-title">Swiss Army</div>
                <div class="us-superlative-name" id="us-sup-swiss">‚Äî</div>
                <div class="us-superlative-detail" id="us-sup-swiss-detail"></div>
              </div>
            </div>
            <div class="us-superlative">
              <div class="us-superlative-icon">üëë</div>
              <div class="us-superlative-info">
                <div class="us-superlative-title">Captain</div>
                <div class="us-superlative-name" id="us-sup-captain">‚Äî</div>
                <div class="us-superlative-detail" id="us-sup-captain-detail"></div>
              </div>
            </div>
          </div>

          <!-- All Players Table -->
          <div class="us-section-title">All Players</div>
          <div class="us-sort-row">
            <button class="us-sort-btn active" data-sort="goals" onclick="sortUnifiedPlayers('goals')">Goals</button>
            <button class="us-sort-btn" data-sort="quarters" onclick="sortUnifiedPlayers('quarters')">Quarters</button>
            <button class="us-sort-btn" data-sort="games" onclick="sortUnifiedPlayers('games')">Games</button>
          </div>
          <div class="us-table-wrapper">
            <table class="us-table" id="us-players-table">
              <thead>
                <tr><th>Player</th><th>Games</th><th>Goals</th><th>Qtrs</th></tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>

      </div>
    </div>

    <!-- FIXTURE VIEW -->
    <div id="fixture-view" class="view hidden">
      <section class="card">
        <div class="card-header">
          <h2 class="card-title">Games</h2><button id="show-add-game-modal" class="icon-btn hidden">‚ûï</button>
        </div>
        <div id="game-list"></div>
      </section>
    </div>

  <div id="edit-team-modal" class="modal-overlay hidden" onclick=
  "closeModal(event, 'edit-team-modal')">
    <div class="modal-content">
      <h3 id="edit-team-modal-title">Edit Team</h3><label for=
      "edit-team-year">Year</label> <input type="number" id=
      "edit-team-year" placeholder="e.g., 2026"> <label for=
      "edit-team-season">Season</label> <select id=
      "edit-team-season">
        <option value="Season 1">
          Season 1
        </option>
        <option value="Season 2">
          Season 2
        </option>
        <option value="NFNL">
          NFNL
        </option>
        <option value="Other">
          Other
        </option>
      </select> <label for="edit-team-name">Team Name</label>
      <input type="text" id="edit-team-name" placeholder=
      "e.g., U11"> <label for="edit-team-photo">Team Photo (Optional)</label>
      <input type="file" id="edit-team-photo" accept="image/*" capture="environment" 
      onchange="handleTeamPhotoUpload(this)">
      <div id="team-photo-preview" style="margin-top: 8px; display: none;">
        <!-- img src intentionally omitted - set dynamically via JavaScript when file is selected -->
        <img id="team-photo-preview-img" alt="Team photo preview" style="max-width: 200px; border-radius: 8px; border: 1px solid var(--border-color);">
      </div>
      <label for="edit-team-ladder-name">External
      Ladder Name (Match Exact Text)</label> <input type="text" id=
      "edit-team-ladder-name" placeholder=
      "e.g., U11-A (for NetballConnect)"> <label for=
      "edit-team-ladder-api">Ladder API URL</label> <input type="url"
      id="edit-team-ladder-api" placeholder=
      "https://api.example.com/ladder"> <label for=
      "edit-team-results-api">Results API URL</label> <input type="url"
      id="edit-team-results-api" placeholder=
      "https://api.example.com/results">
      <div class="modal-actions">
        <button class="cancel-btn" onclick=
        "hideModal('edit-team-modal')">Cancel</button> <button id=
        "update-team-button">Update</button>
      </div>
      <div class="modal-delete-zone hidden">
        <button id="delete-team-button" class=
        "delete-button-modal">Delete Team</button>
      </div>
    </div>
  </div>
  <div id="edit-player-modal" class="modal-overlay hidden" onclick=
  "closeModal(event, 'edit-player-modal')">
    <div class="modal-content">
      <h3>Edit Player</h3><label for="edit-player-name">Player
      Name</label> <input type="text" id="edit-player-name"
      placeholder="Player Name">
      
      <label for="edit-player-fav-position">Favorite Position (optional)</label>
      <select id="edit-player-fav-position">
        <option value="">Auto (best avg +/-)</option>
        <option value="GS">GS - Goal Shooter</option>
        <option value="GA">GA - Goal Attack</option>
        <option value="WA">WA - Wing Attack</option>
        <option value="C">C - Centre</option>
        <option value="WD">WD - Wing Defence</option>
        <option value="GD">GD - Goal Defence</option>
        <option value="GK">GK - Goal Keeper</option>
      </select>

      <div class="checkbox-row">
        <input type="checkbox" id="edit-player-fill-in" style="width: 20px; height: 20px; cursor: pointer; margin-right: 8px; accent-color: #6a0dad;">
        <label for="edit-player-fill-in" style="cursor: pointer;">Mark as fill-in</label>
      </div>
      <p class="helper-text">Fill-in players are listed separately and default to unavailable for new games.</p>
      
      <div class="modal-actions">
        <button class="cancel-btn" onclick=
        "hideModal('edit-player-modal')">Cancel</button>
        <button id="update-player-button">Update</button>
      </div>
      <div class="modal-delete-zone hidden">
        <button id="delete-player-button" class=
        "delete-button-modal">Delete Player</button>
      </div>
    </div>
  </div>
  <div id="add-player-modal" class="modal-overlay hidden" onclick=
  "closeModal(event, 'add-player-modal')">
    <div class="modal-content">
      <h3>Add Player</h3><input type="text" id="new-player-name"
      placeholder="Player Name">
      
      <label for="new-player-fav-position">Favorite Position (optional)</label>
      <select id="new-player-fav-position">
        <option value="">Auto (best avg +/-)</option>
        <option value="GS">GS - Goal Shooter</option>
        <option value="GA">GA - Goal Attack</option>
        <option value="WA">WA - Wing Attack</option>
        <option value="C">C - Centre</option>
        <option value="WD">WD - Wing Defence</option>
        <option value="GD">GD - Goal Defence</option>
        <option value="GK">GK - Goal Keeper</option>
      </select>

      <div class="checkbox-row">
        <input type="checkbox" id="new-player-fill-in" style="width: 20px; height: 20px; cursor: pointer; margin-right: 8px; accent-color: #6a0dad;">
        <label for="new-player-fill-in" style="cursor: pointer;">Mark as fill-in</label>
      </div>
      <p class="helper-text">Fill-in players will default to unavailable for new games.</p>
      
      <div class="modal-actions">
        <button class="cancel-btn" onclick=
        "hideModal('add-player-modal')">Cancel</button> <button id=
        "add-player-button">Add</button>
      </div>
    </div>
  </div>

    <!-- Add Game Modal -->
    <div id="add-game-modal" class="modal-overlay hidden" onclick="closeModal(event, 'add-game-modal')">
      <div class="modal-content">
        <h3>Add Game</h3>
        <div class="form-grid" style="row-gap: 12px;">
          <label for="add-modal-game-round">Round</label>
          <input type="number" id="add-modal-game-round" placeholder="e.g., 1">

          <label for="add-modal-game-date">Date</label>
          <input type="date" id="add-modal-game-date">

          <label for="add-modal-game-time">Game Time</label>
          <input type="time" id="add-modal-game-time" placeholder="e.g., 14:30">

          <label for="add-modal-game-court">Court</label>
          <input type="text" id="add-modal-game-court" placeholder="e.g., Court 1">

          <label for="add-modal-game-venue">Venue üìç</label>
          <div style="display: flex; gap: 8px; align-items: center;">
            <input type="text" id="add-modal-game-venue" placeholder="e.g., Smith Park" style="flex: 1;">
            <button type="button" onclick="getCurrentLocationForModal()" class="icon-button" title="Use current location">üìç</button>
          </div>

          <label for="add-modal-game-status">Game Status</label>
          <select id="add-modal-game-status" onchange="toggleOpponentFieldModal(this.value)">
            <option value="normal">Normal</option>
            <option value="bye">BYE</option>
            <option value="forfeit_us">Forfeited by Us</option>
            <option value="forfeit_opp">Forfeited by Opponent</option>
            <option value="abandoned">Abandoned</option>
          </select>

          <label for="add-modal-game-opponent">Opponent</label>
          <input type="text" id="add-modal-game-opponent" placeholder="Opponent Name">
        </div>
        <div class="modal-actions">
          <button onclick="hideModal('add-game-modal')">Cancel</button>
          <button id="add-game-modal-button">Add</button>
        </div>
      </div>
    </div>
    </div>
  </div>

  <div id="share-lineup-modal" class="modal-overlay hidden"
  onclick="closeModal(event, 'share-lineup-modal')">
    <div class="modal-content">
      <h3>Share Lineup</h3>
      <p style="text-align: center; color: var(--secondary-text);">
      Screenshot this card to share with your team.</p>
      <div id="share-lineup-validation-modal" style=
      "margin-bottom: 16px;"></div>
      <div id="share-lineup-card-modal"></div>
      <div class="modal-actions" style="margin-top: 20px;">
        <button class="cancel-btn" onclick=
        "hideModal('share-lineup-modal')">Close</button>
      </div>
    </div>
  </div>

  <div id="season-summary-view" class="view hidden">
    <div class="view-header">
      <button class="back-button" onclick="hideView('season-summary-view')" aria-label="Back to previous view">‚Üê</button>
      <h2>Season Summary</h2>
    </div>
    <div id="season-summary-slides" style="background: var(--primary-color); min-height: 400px; display: flex; align-items: center; justify-content: center;"></div>
    <div class="summary-nav">
      <button id="summary-prev" onclick="navigateSummary(-1)">‚Üê Back</button>
      <span id="slide-counter" style="color: white; font-weight: 600;">1 / 1</span>
      <button id="summary-next" onclick="navigateSummary(1)">Next ‚Üí</button>
    </div>
  </div>
  <div id="custom-alert-confirm-modal" class=
  "custom-modal-overlay hidden">
    <div class="custom-modal-content">
      <h3 id="custom-modal-title">Confirmation</h3>
      <p id="custom-modal-message">Are you sure?</p>
      <div class="custom-modal-actions" id="custom-modal-actions">
      </div>
    </div>
  </div>
