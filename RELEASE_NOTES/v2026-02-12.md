# Release v2026-02-12

Release date: 2026-02-12

## Summary

### Team Creation Wizard Restructuring
- Restructured team creation from 4 to 6 steps with competition type selection
- Added **Competition Type** step (NFNL, Nillumbik Force, Other) to guide appropriate setup
- Conditional season selection: NFNL and Other competitions use Season 1/2, Nillumbik Force skips season step and uses 'Nillumbik Force' as season
- **Integration Setup** step tailored by competition type:
  - **NFNL**: Ladder URL entry for MyGameDay ladder sync
  - **Nillumbik Force**: Fixture sync configuration (GameDay or Squadi/Netball Connect)
  - **Other**: No integration setup
- Added comprehensive validation for each step with duplicate team detection
- Review step shows all settings before team creation

### API Enhancements
- Updated `createTeam` API to accept `ladderUrl` and `resultsApi` parameters
- Teams can now be created with full integration config in single API call
- Backend correctly handles new parameters and stores them in Teams sheet

### Bug Fixes
- Fixed case sensitivity issue in Apps Script `autoDetectSquadi` action handling
- Added fallback case handling for API action routing to prevent similar issues
- **Fixed Squadi auto-detect to match both "HG" and "Hazel Glen" team name prefixes** - Previously only detected teams starting with "HG " (like "HG 11 Flames"), now also finds "Hazel Glen" teams (like "Hazel Glen 6")
- Added explicit case handlers for autoDetectSquadi action (both 'autoDetectSquadi' and 'autodetectsquadi' cases)

### Production Status
✅ **Squadi auto-detect is now fully working in production**
- Updated Google Apps Script deployment URL in coach-app config
- Tested and verified: autoDetectSquadi API returns complete list of HG teams from Squadi competitions
- Both "HG" and "Hazel Glen" team name prefixes are detected correctly

### Backward Compatibility
- Team Settings modal maintains support for legacy season='NFNL' teams
- Existing teams with season='NFNL' can be edited without data loss
- Display logic handles all season value formats correctly
- Slugification works with new season values ('Nillumbik Force' → 'nillumbik-force')

### Documentation
- Updated CLAUDE.md with team creation wizard flow documentation
- Documented competition types and season handling
- Updated API parameter documentation for `createTeam`
- Added notes about competitionType field inference

## Testing
- All 173 unit tests pass successfully
- Manual testing verified wizard flow for all competition types
- API connectivity confirmed working in production
- Build process completes without errors

## Migration Notes
- New teams created with NFNL competition type will use season='Season 1' or 'Season 2' instead of 'NFNL'
- Existing teams with season='NFNL' continue to work normally
- No data migration required for existing teams
- competitionType field is inferred client-side from ladderUrl/resultsApi, not stored in backend

## Technical Details
- Wizard state management tracks competition type, season, and integration config
- Step navigation automatically skips irrelevant steps based on competition type
- Validation logic adapted for competition-specific requirements
- Integration setup properly serializes fixture config to resultsApi JSON field

### API reliability fixes (2026-02-13)
- Fixed Apps Script API endpoint usage and added runtime health-check with automatic mock-data fallback when live API is unavailable.
- Hardened monitoring to detect HTTP 403 (permission) on the Apps Script ping and added clearer alerting.
- Added scheduled daily logo-refresh workflow and updated club/team logos; unit tests updated to prevent headless failures.
