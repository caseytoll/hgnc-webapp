/* ========================================
   LADDER STYLES
   ======================================== */

.ladder-updated {
  font-size: 0.8rem;
  color: var(--text-muted);
  margin-bottom: 8px;
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.show-columns-toggle {
  padding: 2px 8px;
  font-size: 0.7rem;
  border-radius: var(--radius-full);
  border: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
}

.show-columns-toggle:hover {
  border-color: var(--primary-500);
  color: var(--primary-400);
}

.ladder-refresh-btn {
  padding: 2px 8px;
  font-size: 0.7rem;
  border-radius: var(--radius-full);
  border: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  cursor: pointer;
  transition: all var(--transition-fast);
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.ladder-refresh-btn:hover {
  border-color: var(--primary-500);
  color: var(--primary-400);
}

.ladder-refresh-btn svg {
  flex-shrink: 0;
}

.ladder-container {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  border-radius: 10px;
  padding: 8px;
  overflow: visible;
  max-height: none;
}

/* When expanded allow horizontal scrolling so additional columns are reachable on narrow screens */
.ladder-container.expanded-columns {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.ladder-container:not(.expanded-columns) .ladder-table th,
.ladder-container:not(.expanded-columns) .ladder-table td {
  padding: 4px 6px;
  white-space: nowrap;          /* keep compact single-line for most columns */
  overflow: hidden;
  text-overflow: clip;          /* remove visual ellipsis; clip instead */
  line-height: 1.05;
}
/* Ensure POS and PTS headers are not truncated */
.ladder-container:not(.expanded-columns) .ladder-table thead th[data-key="POS"],
.ladder-container:not(.expanded-columns) .ladder-table thead th[data-key="PTS"] {
  white-space: nowrap;
  text-overflow: clip;
  overflow: visible;
}

/* Allow TEAM column to wrap only (prevent ellipses for long club names like Montmorency) */
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="TEAM"],
.ladder-container:not(.expanded-columns) .ladder-table td[data-key="TEAM"] {
  white-space: normal;          /* allow wrapping */
  overflow: visible;
  text-overflow: unset;
  word-break: break-word;
  line-height: 1.1;
}

/* Give TEAM column more room while keeping numeric columns compact */
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="POS"] { width: 44px; text-align: left; }
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="TEAM"] { min-width: 180px; max-width: 62%; text-align: left; }
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="P"],
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="W"],
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="L"],
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="D"],
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="B"] { width: 30px; text-align: center; }
.ladder-container:not(.expanded-columns) .ladder-table th[data-key="PTS"] { width: 48px; text-align: left; white-space: nowrap; text-overflow: clip; }

.ladder-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.8rem;
  table-layout: fixed;
}

/* When expanded, allow the table to grow horizontally so container can scroll */
.ladder-container.expanded-columns .ladder-table {
  width: auto;
  min-width: max-content;
}

/* On narrow screens let the table use auto layout so TEAM column can expand naturally (restores v6 behaviour) */
@media (max-width: 768px) {
  .ladder-table { table-layout: auto; }
}

.ladder-table th,
.ladder-table td {
  padding: 4px 6px;
  border-bottom: 1px solid var(--border-light);
  white-space: normal;
  word-wrap: break-word;
  vertical-align: top;
}

.ladder-table th[data-key="POS"] { width: 35px; }
.ladder-table th[data-key="TEAM"] { width: auto; min-width: 140px; }
.ladder-table th[data-key="P"],
.ladder-table th[data-key="W"],
.ladder-table th[data-key="L"],
.ladder-table th[data-key="D"],
.ladder-table th[data-key="B"] { width: 30px; text-align: center; }
.ladder-table th[data-key="%"] { width: 45px; }
.ladder-table th[data-key="FF"],
.ladder-table th[data-key="FG"] { width: 35px; }
.ladder-table th[data-key="For"],
.ladder-table th[data-key="Agst"] { width: 45px; }
.ladder-table th[data-key="% Won"] { width: 55px; }

/* Center small stat columns (headers + values) */
.ladder-table td[data-key="P"],
.ladder-table td[data-key="W"],
.ladder-table td[data-key="L"],
.ladder-table td[data-key="D"],
.ladder-table td[data-key="PTS"] { text-align: left; }

.ladder-table th.numeric,
.ladder-table td.numeric { text-align: left; }

/* Ensure header and cell box model & padding match exactly to avoid visual misalignment */
.ladder-table thead th,
.ladder-table tbody td {
  box-sizing: border-box !important;
  padding: 4px 6px !important;   /* force identical padding for header and cells */
  margin: 0 !important;
}

/* Explicit per-column widths on both header AND cells to guarantee alignment */
.ladder-table th[data-key="POS"],
.ladder-table td[data-key="POS"] { width: 36px; text-align: left; }
.ladder-table th.logo-col, .ladder-table td.logo-col { width: 36px; text-align: center; }
.ladder-table th[data-key="TEAM"],
.ladder-table td[data-key="TEAM"] { min-width: 180px; max-width: 62%; text-align: left; }
.ladder-table th[data-key="P"], .ladder-table td[data-key="P"],
.ladder-table th[data-key="W"], .ladder-table td[data-key="W"],
.ladder-table th[data-key="L"], .ladder-table td[data-key="L"],
.ladder-table th[data-key="D"], .ladder-table td[data-key="D"] { width: 28px; text-align: left; }


.ladder-table th[data-key="PTS"], .ladder-table td[data-key="PTS"] { width: 48px; text-align: left; }

/* Ensure sticky header cells use same alignment */
.ladder-table thead th[data-key="POS"],
.ladder-table thead th[data-key="TEAM"],
.ladder-table thead th[data-key="P"],
.ladder-table thead th[data-key="W"],
.ladder-table thead th[data-key="L"],
.ladder-table thead th[data-key="D"],
.ladder-table thead th[data-key="PTS"] { text-align: inherit; }

/* Remove temporary debug visuals */
.ladder-table thead th { outline: none; background: transparent; }
.ladder-table tbody td { outline: none; background: transparent; }

/* Keep mobile padding consistent too */
@media (max-width: 768px) {
  .ladder-table thead th,
  .ladder-table tbody td { padding: 3px 4px; box-sizing: border-box; }
  /* mirror widths on mobile too */
  .ladder-table th[data-key="POS"], .ladder-table td[data-key="POS"] { width: 30px; }
  .ladder-table th.logo-col, .ladder-table td.logo-col { width: 30px; }
  .ladder-table th[data-key="P"], .ladder-table td[data-key="P"],
  .ladder-table th[data-key="W"], .ladder-table td[data-key="W"],
  .ladder-table th[data-key="L"], .ladder-table td[data-key="L"],
  .ladder-table th[data-key="D"], .ladder-table td[data-key="D"] { width: 24px; }
  .ladder-table th[data-key="PTS"], .ladder-table td[data-key="PTS"] { width: 40px; }
}

.ladder-table thead th {
  position: sticky;
  top: 0;
  background: linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02));
  z-index: 2;
}

/* --- Sticky / frozen left columns: POS, logo, TEAM ---
   - keep these columns opaque and above the scrolling cells so content cannot show through
   - left offsets mirror the explicit widths declared above (desktop & mobile)
*/
.ladder-table th[data-key="POS"],
.ladder-table td[data-key="POS"] {
  position: sticky;
  left: 0;
  z-index: 40; /* must sit above all scrolling cells */
  background: var(--bg-card); /* opaque background prevents see-through */
  border-right: 1px solid var(--border-light);
}

.ladder-table th.logo-col,
.ladder-table td.logo-col {
  position: sticky;
  left: 36px; /* matches .logo-col width */
  z-index: 39;
  background: var(--bg-card);
  border-right: 1px solid var(--border-light);
}

.ladder-table th[data-key="TEAM"],
.ladder-table td[data-key="TEAM"] {
  position: sticky;
  left: 72px; /* POS (36) + logo (36) */
  z-index: 38;
  background: var(--bg-card);
  border-right: 1px solid rgba(255,255,255,0.03); /* subtle divider */
}

/* If header cell is sticky it should also be opaque (override earlier transparent rule) */
.ladder-table thead th[data-key="POS"],
.ladder-table thead th.logo-col,
.ladder-table thead th[data-key="TEAM"] {
  background: linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02));
  background-color: var(--bg-card);
  z-index: 50; /* headers above body sticky cells */
}

/* Mobile adjustments — widths are smaller there so sticky offsets must match */
@media (max-width: 768px) {
  .ladder-table th.logo-col,
  .ladder-table td.logo-col { left: 30px; }
  .ladder-table th[data-key="TEAM"],
  .ladder-table td[data-key="TEAM"] { left: 60px; }
}

.ladder-table tr.highlight {
  background: linear-gradient(90deg, rgba(129,49,246,0.06), rgba(129,49,246,0.02));
  font-weight: 700;
  color: var(--primary-600);
}

.ladder-loading, .ladder-error {
  padding: 12px;
  text-align: center;
  color: var(--text-muted);
}

/* Hide extra ladder columns by default */
.ladder-table thead th[data-key="FF"],
.ladder-table thead th[data-key="FG"],
.ladder-table thead th[data-key="For"],
.ladder-table thead th[data-key="Agst"],
.ladder-table thead th[data-key="GD"],
.ladder-table thead th[data-key="PPG"],
.ladder-table thead th[data-key="%"],
.ladder-table thead th[data-key="% Won"],
.ladder-table tbody td[data-key="FF"],
.ladder-table tbody td[data-key="FG"],
.ladder-table tbody td[data-key="For"],
.ladder-table tbody td[data-key="Agst"],
.ladder-table tbody td[data-key="GD"],
.ladder-table tbody td[data-key="PPG"],
.ladder-table tbody td[data-key="%"],
.ladder-table tbody td[data-key="% Won"] {
  display: none;
}

/* Show extra columns when toggled via button */
.ladder-container.expanded-columns .ladder-table thead th[data-key="FF"],
.ladder-container.expanded-columns .ladder-table thead th[data-key="FG"],
.ladder-container.expanded-columns .ladder-table thead th[data-key="For"],
.ladder-container.expanded-columns .ladder-table thead th[data-key="Agst"],
.ladder-container.expanded-columns .ladder-table thead th[data-key="GD"],
.ladder-container.expanded-columns .ladder-table thead th[data-key="PPG"],
.ladder-container.expanded-columns .ladder-table thead th[data-key="%"],
.ladder-container.expanded-columns .ladder-table thead th[data-key="% Won"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="FF"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="FG"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="For"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="Agst"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="GD"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="PPG"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="%"],
.ladder-container.expanded-columns .ladder-table tbody td[data-key="% Won"] {
  display: table-cell;
}

/* Mobile responsiveness for ladder */
@media (max-width: 768px) {
  .ladder-container {
    font-size: 0.75rem;
    padding: 4px;
    max-height: none;
  }

  .ladder-table th,
  .ladder-table td {
    padding: 3px 4px;
    font-size: 0.7rem;
    text-align: left;      /* default left alignment for data */
    vertical-align: middle;/* vertically center all table cells */
  }

  /* Keep numeric headers/cells right-aligned even on small screens */
  .ladder-table th.numeric,
  .ladder-table td.numeric { text-align: left; }

/* Ensure headers are not transformed or clipped */
.ladder-table thead th { white-space: nowrap; text-overflow: clip; overflow: visible; }

  /* Compact basic-view on small screens — prefer clipping (no visual ellipsis) so TEAM can wrap cleanly */
  .ladder-container:not(.expanded-columns) .ladder-table th,
  .ladder-container:not(.expanded-columns) .ladder-table td {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: clip;
    padding: 2px 4px;
    font-size: 0.68rem;
  }

  /* TEAM column should be able to wrap on small screens (avoid ellipses for long names) */
  .ladder-container:not(.expanded-columns) .ladder-table th[data-key="TEAM"],
  .ladder-container:not(.expanded-columns) .ladder-table td[data-key="TEAM"] {
    white-space: normal;
    overflow: visible;
    text-overflow: unset;
    word-break: break-word;
    font-size: 0.72rem;
    line-height: 1.05;
    max-width: 62%;
  }

  .ladder-table th[data-key="POS"] { width: 30px; }
  .ladder-table th[data-key="TEAM"] { min-width: 140px; }
  .ladder-table th[data-key="P"],
  .ladder-table th[data-key="W"],
  .ladder-table th[data-key="L"],
  .ladder-table th[data-key="D"],
  .ladder-table th[data-key="B"] { width: 25px; text-align: center; }
  .ladder-table th[data-key="%"] { width: 40px; }
}

/* Landscape: show all columns automatically */
@media (orientation: landscape) {
  .ladder-table thead th, .ladder-table tbody td { display: table-cell; }
}

/* Smaller font on narrow screens */
@media (max-width: 480px) {
  .ladder-table { font-size: 0.78rem; }
}

/* Mobile optimisations for narrow screens (phones) */
@media (max-width: 420px) {
  .ladder-container {
    padding: 6px 8px;
    border-radius: 10px;
  }

  .ladder-table {
    font-size: 0.72rem;
    table-layout: auto; /* let columns size naturally */
    width: 100%;
  }

  .ladder-table th,
  .ladder-table td {
    padding: 4px 6px;     /* compact but readable */
    font-size: 0.72rem;
    vertical-align: middle;
  }

  /* Reduce logo size so TEAM can take more room */
  .team-logo-ladder { width: 16px; height: 16px; }

  /* Make TEAM column slightly narrower but allow wrapping */
  .ladder-table th[data-key="TEAM"],
  .ladder-table td[data-key="TEAM"] { min-width: 120px; max-width: 55%; }

  /* Keep headers compact and prevent unintended stacking */
  .ladder-table thead th { white-space: nowrap; font-size: 0.68rem; }

  /* Slightly reduce POS width and tighten numeric columns */
  .ladder-table th[data-key="POS"], .ladder-table td[data-key="POS"] { width: 30px; }
  .ladder-table th[data-key="P"], .ladder-table td[data-key="P"],
  .ladder-table th[data-key="W"], .ladder-table td[data-key="W"],
  .ladder-table th[data-key="L"], .ladder-table td[data-key="L"],
  .ladder-table th[data-key="D"], .ladder-table td[data-key="D"] { width: 26px; }
  .ladder-table th[data-key="PTS"], .ladder-table td[data-key="PTS"] { width: 42px; }

  /* Reduce gap between rows */
  .ladder-table tr { height: 36px; }

  /* Reduce header paddings to keep header aligned with cells */
  .ladder-container:not(.expanded-columns) .ladder-table thead th,
  .ladder-container:not(.expanded-columns) .ladder-table td { padding: 3px 6px; }
}

/* Transition / animation for ladder panel */
.ladder-container {
  transition: opacity 220ms ease, transform 220ms ease;
  opacity: 0;
  transform: translateY(6px);
}
.ladder-container.visible {
  opacity: 1;
  transform: none;
}

.ladder-enter { }

@media (prefers-reduced-motion: reduce) {
  .ladder-container {
    transition: none !important;
  }
}
